graphs:

  - id: emotiv
    nodes:
    - id: raw
      module: timeflux.nodes.lsl
      class: Receive
      params:
        prop: name
        value: EmotivDataStream-EEG
    - id: motion
      module: timeflux.nodes.lsl
      class: Receive
      params:
        prop: name
        value: EmotivDataStream-Motion
    - id: publish_raw
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_raw
    - id: publish_filtered
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_filtered
    - id: publish_motion
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: motion
    - id: select
      module: timeflux.nodes.query
      class: LocQuery
      params:
        key: [AF3, F7, F3, FC5, T7, P7, O1, O2, P8, T8, FC6, F4, F8, AF4]
    - id: select_motion
      module: timeflux.nodes.query
      class: LocQuery
      params:
        key: [Q0, Q1, Q2, Q3, ACCZ, ACCY, ACCX, MAGX, MAGY, MAGZ]
    - id: dejitter
      module: timeflux.nodes.dejitter
      class: Reindex
    - id: bandpass
      module: timeflux_dsp.nodes.filters
      class: IIRFilter
      params:
        filter_type: bandpass
        frequencies: [0.1, 40]
        order: 2
    edges:
      - source: raw
        target: select
      - source: select
        target: dejitter
      - source: dejitter
        target: bandpass
      - source: bandpass
        target: publish_filtered
      - source: dejitter
        target: publish_raw
      - source: motion
        target: select_motion
      - source: select_motion
        target: publish_motion
    rate: 10